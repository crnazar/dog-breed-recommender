<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dog Breed Recommender</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-button {
            flex: 1;
            min-width: 150px;
            padding: 15px;
            background: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .tab-button.active {
            background: #4CAF50;
            color: white;
        }

        .tab-content {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .tab-content.active {
            display: block;
        }

        /* Browse & Rate Tab */
        .search-filter {
            margin-bottom: 30px;
        }

        .search-box {
            width: 100%;
            padding: 12px 20px;
            font-size: 1rem;
            border: 2px solid #ddd;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .filter-group select {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 0.95rem;
        }

        .dog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .dog-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .dog-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        .dog-name {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .dog-details {
            margin: 15px 0;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .detail-label {
            font-weight: bold;
            color: #555;
        }

        .detail-value {
            color: #333;
        }

        .rating-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #ddd;
        }

        .stars {
            display: flex;
            gap: 5px;
            margin: 10px 0;
        }

        .star {
            font-size: 2rem;
            cursor: pointer;
            color: #ddd;
            transition: color 0.2s;
        }

        .star.filled {
            color: #ffc107;
        }

        .star:hover {
            color: #ffc107;
        }

        .current-rating {
            margin-top: 10px;
            padding: 8px;
            background: #e8f5e9;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
            color: #2e7d32;
        }

        .not-interested-btn {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            background: #f44336;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .not-interested-btn:hover {
            background: #d32f2f;
        }

        .not-interested-btn.marked {
            background: #9e9e9e;
        }

        /* Quiz Tab */
        .quiz-container {
            max-width: 700px;
            margin: 0 auto;
        }

        .quiz-question {
            margin-bottom: 30px;
        }

        .quiz-question h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            padding: 15px;
            background: #f5f5f5;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            background: #e3f2fd;
            border-color: #667eea;
        }

        .quiz-option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .quiz-submit {
            width: 100%;
            padding: 15px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 20px;
        }

        .quiz-submit:hover {
            background: #45a049;
        }

        .quiz-submit:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Recommendations Tab */
        .recommendation-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .recommendation-card h3 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .match-score {
            display: inline-block;
            background: rgba(255,255,255,0.3);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .recommendation-details {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
        }

        .info-list {
            list-style: none;
            margin: 10px 0;
        }

        .info-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.3);
        }

        .info-list li:last-child {
            border-bottom: none;
        }

        .badge {
            display: inline-block;
            padding: 5px 12px;
            background: rgba(255,255,255,0.3);
            border-radius: 15px;
            margin: 5px;
            font-size: 0.9rem;
        }

        /* History Tab */
        .history-section {
            margin-bottom: 30px;
        }

        .history-section h2 {
            color: #667eea;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .clear-history {
            padding: 10px 20px;
            background: #f44336;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .clear-history:hover {
            background: #d32f2f;
        }

        .empty-state {
            text-align: center;
            padding: 50px;
            color: #999;
            font-size: 1.2rem;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }

            .dog-grid {
                grid-template-columns: 1fr;
            }

            .tab-button {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üêï Dog Breed Recommender</h1>
        
        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('browse')">Browse & Rate</button>
            <button class="tab-button" onclick="switchTab('quiz')">Lifestyle Quiz</button>
            <button class="tab-button" onclick="switchTab('recommendations')">My Recommendations</button>
            <button class="tab-button" onclick="switchTab('history')">My History</button>
        </div>

        <!-- Browse & Rate Tab -->
        <div id="browse" class="tab-content active">
            <div class="search-filter">
                <input type="text" id="searchBox" class="search-box" placeholder="Search for a breed...">
                
                <div class="filters">
                    <div class="filter-group">
                        <label>Size</label>
                        <select id="sizeFilter">
                            <option value="">All Sizes</option>
                            <option value="Toy">Toy</option>
                            <option value="Small">Small</option>
                            <option value="Small-Medium">Small-Medium</option>
                            <option value="Medium">Medium</option>
                            <option value="Medium-Large">Medium-Large</option>
                            <option value="Large">Large</option>
                            <option value="Giant">Giant</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label>Activity Level</label>
                        <select id="activityFilter">
                            <option value="">All Levels</option>
                            <option value="1">Very Low</option>
                            <option value="2">Low</option>
                            <option value="3">Moderate</option>
                            <option value="4">High</option>
                            <option value="5">Very High</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label>Apartment Friendly</label>
                        <select id="apartmentFilter">
                            <option value="">Any</option>
                            <option value="true">Yes</option>
                            <option value="false">No</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label>Shedding</label>
                        <select id="sheddingFilter">
                            <option value="">All Levels</option>
                            <option value="1">Very Low</option>
                            <option value="2">Low</option>
                            <option value="3">Moderate</option>
                            <option value="4">High</option>
                            <option value="5">Very High</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="dogGrid" class="dog-grid"></div>
        </div>

        <!-- Quiz Tab -->
        <div id="quiz" class="tab-content">
            <div class="quiz-container">
                <h2 style="text-align: center; color: #667eea; margin-bottom: 30px;">Find Your Perfect Match</h2>
                
                <div class="quiz-question">
                    <h3>What's your living situation?</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" data-question="living" data-value="apartment">
                            üè¢ Apartment or small space
                        </div>
                        <div class="quiz-option" data-question="living" data-value="house">
                            üè° House with yard
                        </div>
                        <div class="quiz-option" data-question="living" data-value="farm">
                            üåæ Farm or large property
                        </div>
                    </div>
                </div>

                <div class="quiz-question">
                    <h3>How active are you?</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" data-question="activity" data-value="1">
                            üõãÔ∏è Couch potato - prefer relaxing
                        </div>
                        <div class="quiz-option" data-question="activity" data-value="3">
                            üö∂ Moderate - daily walks
                        </div>
                        <div class="quiz-option" data-question="activity" data-value="5">
                            üèÉ Very active - love outdoor adventures
                        </div>
                    </div>
                </div>

                <div class="quiz-question">
                    <h3>How much grooming can you handle?</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" data-question="grooming" data-value="1">
                            ‚úÇÔ∏è Minimal - occasional brushing
                        </div>
                        <div class="quiz-option" data-question="grooming" data-value="3">
                            üíá Moderate - regular brushing
                        </div>
                        <div class="quiz-option" data-question="grooming" data-value="5">
                            üíÖ High maintenance - don't mind professional grooming
                        </div>
                    </div>
                </div>

                <div class="quiz-question">
                    <h3>Do you have kids or other pets?</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" data-question="family" data-value="kids">
                            üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Yes, kids
                        </div>
                        <div class="quiz-option" data-question="family" data-value="pets">
                            üê± Yes, other pets
                        </div>
                        <div class="quiz-option" data-question="family" data-value="both">
                            üë®‚Äçüë©‚Äçüëß‚Äçüë¶üê± Both kids and pets
                        </div>
                        <div class="quiz-option" data-question="family" data-value="none">
                            üö´ No kids or pets
                        </div>
                    </div>
                </div>

                <div class="quiz-question">
                    <h3>How important is trainability?</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" data-question="training" data-value="5">
                            üéì Very important - want an obedient dog
                        </div>
                        <div class="quiz-option" data-question="training" data-value="3">
                            üìö Somewhat important - willing to work on it
                        </div>
                        <div class="quiz-option" data-question="training" data-value="1">
                            ü§∑ Not critical - accept independent dogs
                        </div>
                    </div>
                </div>

                <button class="quiz-submit" onclick="submitQuiz()" disabled id="quizSubmit">Get Recommendations</button>
            </div>
        </div>

        <!-- Recommendations Tab -->
        <div id="recommendations" class="tab-content">
            <h2 style="text-align: center; color: #667eea; margin-bottom: 30px;">Your Personalized Recommendations</h2>
            <div id="recommendationsList"></div>
        </div>

        <!-- History Tab -->
        <div id="history" class="tab-content">
            <button class="clear-history" onclick="clearHistory()">Clear All History</button>
            
            <div class="history-section">
                <h2>‚≠ê Rated Breeds</h2>
                <div id="ratedList"></div>
            </div>

            <div class="history-section">
                <h2>‚ùå Not Interested</h2>
                <div id="notInterestedList"></div>
            </div>
        </div>
    </div>

    <script>
        let dogBreeds = [];
        let userRatings = {};
        let notInterested = [];
        let quizAnswers = {};

        // Load data from localStorage
        function loadUserData() {
            const savedRatings = localStorage.getItem('dogRatings');
            const savedNotInterested = localStorage.getItem('notInterested');
            
            if (savedRatings) userRatings = JSON.parse(savedRatings);
            if (savedNotInterested) notInterested = JSON.parse(savedNotInterested);
        }

        // Save data to localStorage
        function saveUserData() {
            localStorage.setItem('dogRatings', JSON.stringify(userRatings));
            localStorage.setItem('notInterested', JSON.stringify(notInterested));
        }

        // Load dog breeds from JSON
        async function loadDogBreeds() {
            try {
                const response = await fetch('dog-breeds.json');
                const data = await response.json();
                dogBreeds = data.breeds;
                displayDogs();
            } catch (error) {
                console.error('Error loading breeds:', error);
            }
        }

        // Display dogs in grid
        function displayDogs(filteredBreeds = null) {
            const grid = document.getElementById('dogGrid');
            const breedsToShow = filteredBreeds || dogBreeds;
            
            grid.innerHTML = '';
            
            breedsToShow.forEach(breed => {
                const card = createDogCard(breed);
                grid.appendChild(card);
            });
        }

        // Create dog card
        function createDogCard(breed) {
            const card = document.createElement('div');
            card.className = 'dog-card';
            
            const isNotInterested = notInterested.includes(breed.id);
            const userRating = userRatings[breed.id] || 0;
            
            card.innerHTML = `
                <div class="dog-name">${breed.name}</div>
                <div class="dog-details">
                    <div class="detail-row">
                        <span class="detail-label">Size:</span>
                        <span class="detail-value">${breed.size}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Activity Level:</span>
                        <span class="detail-value">${'‚ö°'.repeat(breed.activityLevel)}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Shedding:</span>
                        <span class="detail-value">${'ü™Æ'.repeat(breed.shedding)}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Good with Kids:</span>
                        <span class="detail-value">${'‚ù§Ô∏è'.repeat(breed.goodWithKids)}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Temperament:</span>
                        <span class="detail-value">${breed.temperament.join(', ')}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Lifespan:</span>
                        <span class="detail-value">${breed.lifespan}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Weight:</span>
                        <span class="detail-value">${breed.weight}</span>
                    </div>
                </div>
                <p style="margin: 15px 0; color: #666; line-height: 1.5;">${breed.description}</p>
                <details style="margin: 10px 0;">
                    <summary style="cursor: pointer; font-weight: bold; color: #667eea;">Food & Treats</summary>
                    <div style="margin-top: 10px; padding: 10px; background: white; border-radius: 5px;">
                        <p style="margin: 5px 0;"><strong>Best Foods:</strong> ${breed.bestFoods.join(', ')}</p>
                        <p style="margin: 5px 0;"><strong>Favorite Treats:</strong> ${breed.favoriteTreats.join(', ')}</p>
                    </div>
                </details>
                <div class="rating-section">
                    <strong>Rate this breed:</strong>
                    <div class="stars" data-breed-id="${breed.id}">
                        ${[1,2,3,4,5].map(star => `
                            <span class="star ${userRating >= star ? 'filled' : ''}" data-rating="${star}">‚òÖ</span>
                        `).join('')}
                    </div>
                    ${userRating > 0 ? `<div class="current-rating">Your rating: ${userRating} star${userRating > 1 ? 's' : ''}</div>` : ''}
                </div>
                <button class="not-interested-btn ${isNotInterested ? 'marked' : ''}" 
                        onclick="toggleNotInterested(${breed.id})"
                        ${isNotInterested ? 'disabled' : ''}>
                    ${isNotInterested ? '‚úì Marked Not Interested' : 'Not Interested'}
                </button>
            `;
            
            // Add star rating functionality
            const starsContainer = card.querySelector('.stars');
            const stars = starsContainer.querySelectorAll('.star');
            
            stars.forEach(star => {
                star.addEventListener('click', () => {
                    const rating = parseInt(star.dataset.rating);
                    rateBreed(breed.id, rating);
                    updateStars(starsContainer, rating);
                    
                    // Update current rating display
                    const existingRating = card.querySelector('.current-rating');
                    if (existingRating) {
                        existingRating.textContent = `Your rating: ${rating} star${rating > 1 ? 's' : ''}`;
                    } else {
                        const ratingDiv = document.createElement('div');
                        ratingDiv.className = 'current-rating';
                        ratingDiv.textContent = `Your rating: ${rating} star${rating > 1 ? 's' : ''}`;
                        starsContainer.after(ratingDiv);
                    }
                });
            });
            
            return card;
        }

        // Update star display
        function updateStars(container, rating) {
            const stars = container.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('filled');
                } else {
                    star.classList.remove('filled');
                }
            });
        }

        // Rate a breed
        function rateBreed(breedId, rating) {
            userRatings[breedId] = rating;
            saveUserData();
        }

        // Toggle not interested
        function toggleNotInterested(breedId) {
            if (!notInterested.includes(breedId)) {
                notInterested.push(breedId);
                saveUserData();
                displayDogs(filterDogs());
            }
        }

        // Filter dogs based on search and filters
        function filterDogs() {
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();
            const sizeFilter = document.getElementById('sizeFilter').value;
            const activityFilter = document.getElementById('activityFilter').value;
            const apartmentFilter = document.getElementById('apartmentFilter').value;
            const sheddingFilter = document.getElementById('sheddingFilter').value;
            
            return dogBreeds.filter(breed => {
                const matchesSearch = breed.name.toLowerCase().includes(searchTerm) ||
                                    breed.description.toLowerCase().includes(searchTerm);
                const matchesSize = !sizeFilter || breed.size === sizeFilter;
                const matchesActivity = !activityFilter || breed.activityLevel.toString() === activityFilter;
                const matchesApartment = !apartmentFilter || breed.apartment.toString() === apartmentFilter;
                const matchesShedding = !sheddingFilter || breed.shedding.toString() === sheddingFilter;
                
                return matchesSearch && matchesSize && matchesActivity && matchesApartment && matchesShedding;
            });
        }

        // Tab switching
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            
            // Load specific content
            if (tabName === 'recommendations') {
                displayRecommendations();
            } else if (tabName === 'history') {
                displayHistory();
            }
        }

        // Quiz functionality
        document.querySelectorAll('.quiz-option').forEach(option => {
            option.addEventListener('click', function() {
                const question = this.dataset.question;
                const value = this.dataset.value;
                
                // Remove selected from siblings
                this.parentElement.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Add selected to this option
                this.classList.add('selected');
                
                // Save answer
                quizAnswers[question] = value;
                
                // Check if all questions answered
                const allAnswered = ['living', 'activity', 'grooming', 'family', 'training']
                    .every(q => quizAnswers[q]);
                
                document.getElementById('quizSubmit').disabled = !allAnswered;
            });
        });

        // Submit quiz
        function submitQuiz() {
            localStorage.setItem('quizAnswers', JSON.stringify(quizAnswers));
            switchTab('recommendations');
            const recommendationsTab = document.querySelector('.tab-button:nth-child(3)');
            recommendationsTab.click();
        }

        // Calculate match score
        function calculateMatchScore(breed) {
            let score = 0;
            let maxScore = 0;
            
            // Check if user has rated this breed
            const userRating = userRatings[breed.id];
            if (userRating) {
                score += userRating * 20; // 20 points per star (max 100)
                maxScore += 100;
            }
            
            // Check quiz answers
            const savedQuiz = localStorage.getItem('quizAnswers');
            if (savedQuiz) {
                const quiz = JSON.parse(savedQuiz);
                
                // Living situation
                if (quiz.living === 'apartment') {
                    score += breed.apartment ? 20 : 0;
                    maxScore += 20;
                } else if (quiz.living === 'house') {
                    score += 15;
                    maxScore += 20;
                } else if (quiz.living === 'farm') {
                    score += breed.size.includes('Large') || breed.size === 'Giant' ? 20 : 10;
                    maxScore += 20;
                }
                
                // Activity level
                const quizActivity = parseInt(quiz.activity);
                const activityDiff = Math.abs(breed.activityLevel - quizActivity);
                score += (5 - activityDiff) * 4; // 0-20 points
                maxScore += 20;
                
                // Grooming
                const quizGrooming = parseInt(quiz.grooming);
                const groomingDiff = Math.abs(breed.grooming - quizGrooming);
                score += (5 - groomingDiff) * 3; // 0-15 points
                maxScore += 15;
                
                // Family
                if (quiz.family === 'kids' || quiz.family === 'both') {
                    score += breed.goodWithKids * 3; // 0-15 points
                    maxScore += 15;
                }
                if (quiz.family === 'pets' || quiz.family === 'both') {
                    score += breed.goodWithPets * 3; // 0-15 points
                    maxScore += 15;
                }
                if (quiz.family === 'none') {
                    score += 15;
                    maxScore += 15;
                }
                
                // Training
                const quizTraining = parseInt(quiz.training);
                const trainingDiff = Math.abs(breed.trainability - quizTraining);
                score += (5 - trainingDiff) * 3; // 0-15 points
                maxScore += 15;
            }
            
            // Bonus points for highly rated similar breeds
            const similarBreeds = dogBreeds.filter(b => 
                b.size === breed.size && 
                Math.abs(b.activityLevel - breed.activityLevel) <= 1 &&
                userRatings[b.id] >= 4
            );
            if (similarBreeds.length > 0) {
                score += 10;
                maxScore += 10;
            }
            
            return maxScore > 0 ? Math.round((score / maxScore) * 100) : 50;
        }

        // Display recommendations
        function displayRecommendations() {
            const container = document.getElementById('recommendationsList');
            
            // Get all breeds with match scores
            const scoredBreeds = dogBreeds
                .filter(breed => !notInterested.includes(breed.id))
                .map(breed => ({
                    ...breed,
                    matchScore: calculateMatchScore(breed)
                }))
                .sort((a, b) => b.matchScore - a.matchScore)
                .slice(0, 10); // Top 10 recommendations
            
            if (scoredBreeds.length === 0) {
                container.innerHTML = '<div class="empty-state">Complete the quiz or rate some breeds to get recommendations!</div>';
                return;
            }
            
            container.innerHTML = scoredBreeds.map(breed => `
                <div class="recommendation-card">
                    <h3>${breed.name}</h3>
                    <div class="match-score">Match Score: ${breed.matchScore}%</div>
                    <p style="font-size: 1.1rem; margin: 15px 0;">${breed.description}</p>
                    
                    <div class="recommendation-details">
                        <div style="margin-bottom: 15px;">
                            <strong>Key Traits:</strong>
                            <div>
                                ${breed.temperament.map(t => `<span class="badge">${t}</span>`).join('')}
                            </div>
                        </div>
                        
                        <ul class="info-list">
                            <li><strong>Size:</strong> ${breed.size} (${breed.weight})</li>
                            <li><strong>Activity Level:</strong> ${'‚ö°'.repeat(breed.activityLevel)} (${breed.activityLevel}/5)</li>
                            <li><strong>Shedding:</strong> ${'ü™Æ'.repeat(breed.shedding)} (${breed.shedding}/5)</li>
                            <li><strong>Grooming Needs:</strong> ${breed.grooming}/5</li>
                            <li><strong>Trainability:</strong> ${breed.trainability}/5</li>
                            <li><strong>Good with Kids:</strong> ${breed.goodWithKids}/5</li>
                            <li><strong>Good with Pets:</strong> ${breed.goodWithPets}/5</li>
                            <li><strong>Apartment Friendly:</strong> ${breed.apartment ? 'Yes' : 'No'}</li>
                            <li><strong>Lifespan:</strong> ${breed.lifespan}</li>
                        </ul>
                        
                        <div style="margin-top: 15px;">
                            <strong>Favorite Foods:</strong><br>
                            ${breed.bestFoods.join(', ')}
                        </div>
                        
                        <div style="margin-top: 10px;">
                            <strong>Favorite Treats:</strong><br>
                            ${breed.favoriteTreats.join(', ')}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Display history
        function displayHistory() {
            const ratedList = document.getElementById('ratedList');
            const notInterestedList = document.getElementById('notInterestedList');
            
            // Rated breeds
            const ratedBreeds = Object.entries(userRatings)
                .map(([id, rating]) => ({
                    breed: dogBreeds.find(b => b.id === parseInt(id)),
                    rating
                }))
                .filter(item => item.breed)
                .sort((a, b) => b.rating - a.rating);
            
            if (ratedBreeds.length === 0) {
                ratedList.innerHTML = '<div class="empty-state">No rated breeds yet</div>';
            } else {
                ratedList.innerHTML = '<div class="dog-grid">' + 
                    ratedBreeds.map(item => {
                        const card = createDogCard(item.breed);
                        return card.outerHTML;
                    }).join('') + 
                    '</div>';
            }
            
            // Not interested breeds
            const notInterestedBreeds = notInterested
                .map(id => dogBreeds.find(b => b.id === id))
                .filter(breed => breed);
            
            if (notInterestedBreeds.length === 0) {
                notInterestedList.innerHTML = '<div class="empty-state">No breeds marked as not interested</div>';
            } else {
                notInterestedList.innerHTML = '<div class="dog-grid">' +
                    notInterestedBreeds.map(breed => {
                        const card = createDogCard(breed);
                        return card.outerHTML;
                    }).join('') +
                    '</div>';
            }
        }

        // Clear history
        function clearHistory() {
            if (confirm('Are you sure you want to clear all your ratings and preferences? This cannot be undone.')) {
                userRatings = {};
                notInterested = [];
                quizAnswers = {};
                localStorage.clear();
                displayDogs();
                displayHistory();
                alert('History cleared successfully!');
            }
        }

        // Setup filters
        document.getElementById('searchBox').addEventListener('input', () => {
            displayDogs(filterDogs());
        });

        ['sizeFilter', 'activityFilter', 'apartmentFilter', 'sheddingFilter'].forEach(filterId => {
            document.getElementById(filterId).addEventListener('change', () => {
                displayDogs(filterDogs());
            });
        });

        // Initialize
        loadUserData();
        loadDogBreeds();
    </script>
</body>
</html>
